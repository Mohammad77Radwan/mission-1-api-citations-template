<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🔧 Guide Débogage F12</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: system-ui, sans-serif; 
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: #333; 
            line-height: 1.6;
        }
        
        .container { 
            max-width: 900px; 
            margin: 0 auto; 
            background: white; 
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        .header { 
            background: linear-gradient(135deg, #667eea, #764ba2); 
            color: white; 
            padding: 2rem; 
            text-align: center; 
        }
        .header h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        
        .nav { 
            background: #f8f9fa; 
            padding: 1rem; 
            display: flex; 
            justify-content: center; 
            gap: 1rem; 
            border-bottom: 1px solid #dee2e6;
        }
        .nav button { 
            padding: 0.75rem 1.5rem; 
            background: white; 
            border: 2px solid #e9ecef; 
            border-radius: 20px; 
            cursor: pointer; 
            transition: all 0.3s;
        }
        .nav button:hover { background: #e9ecef; }
        .nav button.active { background: #667eea; color: white; border-color: #667eea; }
        
        .section { display: none; padding: 2rem; }
        .section.active { display: block; }
        .section h2 { color: #495057; margin-bottom: 1.5rem; border-bottom: 3px solid #667eea; padding-bottom: 0.5rem; }
        
        .card { 
            background: #f8f9fa; 
            border-left: 4px solid #667eea; 
            padding: 1.5rem; 
            margin-bottom: 1.5rem; 
            border-radius: 0 8px 8px 0;
        }
        .card h3 { color: #495057; margin-bottom: 1rem; }
        
        .demo { 
            background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1)); 
            padding: 1.5rem; 
            border-radius: 10px; 
            margin-bottom: 1.5rem;
        }
        
        .btn { 
            background: linear-gradient(135deg, #667eea, #764ba2); 
            color: white; 
            border: none; 
            padding: 1rem 2rem; 
            border-radius: 20px; 
            cursor: pointer; 
            font-weight: 600;
            transition: all 0.3s;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102,126,234,0.4); }
        
        .code { 
            background: #f8f9fa; 
            padding: 1rem; 
            border-radius: 5px; 
            font-family: monospace; 
            margin: 1rem 0;
            border-left: 3px solid #667eea;
            white-space: pre-wrap;
        }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin: 1rem 0; }
        
        .steps { background: white; padding: 1.5rem; border-radius: 8px; border: 2px solid #e9ecef; }
        .steps ol { padding-left: 1.5rem; }
        .steps li { margin-bottom: 0.5rem; }
        
        kbd { 
            background: #f8f9fa; 
            border: 1px solid #dee2e6; 
            border-radius: 3px; 
            padding: 0.2rem 0.4rem; 
            font-family: monospace;
        }
        
        .highlight { background: #fff3cd; padding: 0.5rem; border-radius: 4px; border: 1px solid #ffeaa7; }
        .success { background: #d1ecf1; color: #0c5460; padding: 1rem; border-radius: 5px; margin-top: 1rem; }
        .error { background: #f8d7da; color: #721c24; padding: 1rem; border-radius: 5px; margin-top: 1rem; }
        
        @media (max-width: 768px) { 
            .grid { grid-template-columns: 1fr; } 
            .nav { flex-wrap: wrap; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔧 Guide Débogage F12</h1>
            <p>Les DevTools expliqués simplement - Version alignée avec script.js</p>
        </div>

        <div class="nav">
            <button class="active" onclick="showSection('console')">💬 Console</button>
            <button onclick="showSection('network')">🌐 Network</button>
            <button onclick="showSection('erreurs')">🚨 Erreurs</button>
        </div>

        <!-- Section Console -->
        <section id="console" class="section active">
            <h2>💬 L'Onglet Console</h2>
            
            <div class="card">
                <h3>🎯 À quoi ça sert ?</h3>
                <ul>
                    <li>Voir les messages de votre code (console.log)</li>
                    <li>Détecter les erreurs JavaScript</li>
                    <li>Tester du code rapidement</li>
                    <li>Utiliser les outils de debug intégrés</li>
                </ul>
            </div>

            <div class="demo">
                <h3>🧪 Messages de script.js</h3>
                <div class="highlight">
                    <strong>🎯 Dans votre script principal, vous devriez voir cette séquence :</strong>
                </div>
                <div class="code">🚀 Page chargée, récupération de la première citation...
🔄 Début du chargement...
📡 Appel API vers: https://api.quotable.io/random
📥 Réponse reçue: Response {status: 200, ok: true, ...}
✅ Données reçues: {content: "...", author: "..."}
📝 Citation: [texte de la citation]
👤 Auteur: [nom de l'auteur]
📄 Citation affichée: [même texte]
👤 Auteur affiché: [même auteur]</div>
                
                <div class="steps">
                    <ol>
                        <li>Appuyez sur <kbd>F12</kbd></li>
                        <li>Cliquez sur l'onglet <strong>Console</strong></li>
                        <li>Rechargez votre page (F5)</li>
                        <li>Observez la séquence de messages ci-dessus</li>
                    </ol>
                </div>
                <button onclick="demoConsole()" class="btn">📤 Tester les messages console</button>
            </div>

            <div class="card">
                <h3>✏️ Commandes Utiles</h3>
                <p>Tapez ces commandes dans la console pour tester votre projet :</p>
                <div class="code">// Tester l'API directement
debug.testAPI()

// Vérifier les éléments DOM
debug.checkDOM()

// État actuel de l'application
debugCitations()

// Aide pour comprendre le code
analyseCode.guidePasAPas() // Si script-avec-indices.js chargé</div>
            </div>
        </section>

        <!-- Section Network -->
        <section id="network" class="section">
            <h2>🌐 L'Onglet Network</h2>
            
            <div class="card">
                <h3>🎯 À quoi ça sert ?</h3>
                <ul>
                    <li>Voir tous les appels API</li>
                    <li>Vérifier les codes de statut</li>
                    <li>Voir le contenu des réponses</li>
                    <li>Mesurer les performances</li>
                </ul>
            </div>

            <div class="demo">
                <h3>🧪 Test API (même code que script.js)</h3>
                <div class="steps">
                    <ol>
                        <li>Ouvrez l'onglet <strong>Network</strong></li>
                        <li>Cliquez sur le bouton ci-dessous</li>
                        <li>Regardez apparaître "random" dans Network</li>
                        <li>Cliquez dessus pour voir les détails</li>
                    </ol>
                </div>
                <button onclick="demoNetworkCoherent()" class="btn">📡 Tester l'API (async/await)</button>
                <div id="network-result" style="margin-top: 1rem; padding: 1rem; background: white; border-radius: 5px; min-height: 50px;"></div>
            </div>

            <div class="card">
                <h3>🎓 Code Utilisé (identique à script.js)</h3>
                <div class="code">// Même approche que dans votre script principal
async function obtenirCitation() {
    try {
        console.log('📡 Appel API vers:', API_URL);
        const response = await fetch(API_URL);
        
        console.log('📥 Réponse reçue:', response);
        
        if (!response.ok) {
            throw new Error(`Erreur HTTP: ${response.status}`);
        }
        
        const data = await response.json();
        console.log('✅ Données reçues:', data);
        
        return data;
    } catch (error) {
        console.error('❌ Erreur capturée:', error);
    }
}</div>
            </div>

            <div class="grid">
                <div class="card">
                    <h3>🎨 Codes de Statut</h3>
                    <p><span style="color: #28a745; font-weight: bold;">200</span> = Succès ✅</p>
                    <p><span style="color: #dc3545; font-weight: bold;">404</span> = Non trouvé ❌</p>
                    <p><span style="color: #fd7e14; font-weight: bold;">500</span> = Erreur serveur 💥</p>
                </div>
                <div class="card">
                    <h3>👀 Que regarder</h3>
                    <p><strong>Name :</strong> "random" (nom de la requête)</p>
                    <p><strong>Status :</strong> 200 (si tout va bien)</p>
                    <p><strong>Response :</strong> JSON avec la citation</p>
                    <p><strong>Headers :</strong> Content-Type: application/json</p>
                </div>
            </div>
        </section>

        <!-- Section Erreurs -->
        <section id="erreurs" class="section">
            <h2>🚨 Comprendre les Erreurs</h2>
            
            <div class="card">
                <h3>❌ ReferenceError</h3>
                <div class="code">Uncaught ReferenceError: maVariable is not defined</div>
                <p><strong>Problème :</strong> Variable qui n'existe pas</p>
                <p><strong>Solution :</strong> Vérifiez l'orthographe et la déclaration</p>
            </div>

            <div class="card">
                <h3>🌐 TypeError</h3>
                <div class="code">TypeError: Cannot read property 'content' of undefined</div>
                <p><strong>Problème :</strong> Objet undefined (souvent API qui n'a pas répondu)</p>
                <p><strong>Solution :</strong> Vérifiez que l'objet existe avant de l'utiliser</p>
            </div>

            <div class="card">
                <h3>📡 Network Error</h3>
                <div class="code">Failed to fetch</div>
                <p><strong>Problème :</strong> Problème de connexion internet</p>
                <p><strong>Solution :</strong> Vérifiez l'URL et la connexion</p>
                <p><strong>Dans script.js :</strong> Cette erreur est gérée par gererErreur()</p>
            </div>

            <div class="demo">
                <h3>🧪 Test de Gestion d'Erreurs (comme script.js)</h3>
                <div class="steps">
                    <ol>
                        <li>Coupez votre connexion internet</li>
                        <li>Cliquez sur le bouton ci-dessous</li>
                        <li>Observez la gestion d'erreur</li>
                        <li>Reconnectez et réessayez</li>
                    </ol>
                </div>
                <button onclick="testErreurCoherent()" class="btn">💥 Tester gestion d'erreur</button>
                <div id="error-result" style="margin-top: 1rem;"></div>
                <p style="color: #856404; font-style: italic; margin-top: 1rem;">⚠️ Test volontaire pour apprentissage - même logique que script.js</p>
            </div>

            <div class="card">
                <h3>🔍 Messages d'Erreur de script.js</h3>
                <p>Votre script principal gère ces erreurs automatiquement :</p>
                <div class="code">// Connexion coupée
⚠️ Erreur affichée à l'utilisateur: Problème de connexion. Vérifiez votre accès internet.

// Serveur en panne
⚠️ Erreur affichée à l'utilisateur: Le serveur rencontre des difficultés. Veuillez patienter.

// Citation introuvable
⚠️ Erreur affichée à l'utilisateur: Citation introuvable. Réessayons avec une autre.</div>
            </div>
        </section>
    </div>

    <script>
        // Variables globales (identiques à script.js)
        const API_URL = 'https://api.quotable.io/random';

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active'));
            
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
        }

        function demoConsole() {
            // Messages identiques à script.js
            console.log('🎉 Demo depuis le guide debug !');
            console.log('📊 Objet de test:', {content: 'Citation test', author: 'Guide Debug', length: 25});
            console.log('✅ Console fonctionne parfaitement !');
            console.log('💡 Ces messages sont identiques au style de script.js');
            alert('📺 Regardez la console ! 4 messages envoyés avec le même style que script.js');
        }

        // Version corrigée qui utilise async/await comme script.js
        async function demoNetworkCoherent() {
            const result = document.getElementById('network-result');
            
            result.innerHTML = '<p>⏳ Appel API en cours... Regardez Network ! (même code que script.js)</p>';
            
            try {
                // Code IDENTIQUE à script.js
                console.log('📡 Appel API vers:', API_URL);
                const response = await fetch(API_URL);
                
                console.log('📥 Réponse reçue:', response);
                
                if (!response.ok) {
                    if (response.status === 404) {
                        throw new Error('Citation non trouvée (404)');
                    } else if (response.status >= 500) {
                        throw new Error('Problème serveur. Réessayez dans quelques instants.');
                    } else {
                        throw new Error(`Erreur HTTP: ${response.status}`);
                    }
                }
                
                const data = await response.json();
                
                console.log('✅ Données reçues:', data);
                console.log('📝 Citation:', data.content);
                console.log('👤 Auteur:', data.author);
                
                result.innerHTML = `
                    <div class="success">
                        <h4>✅ API OK ! (comportement identique à script.js)</h4>
                        <p><strong>Citation :</strong> "${data.content.substring(0, 60)}${data.content.length > 60 ? '...' : ''}"</p>
                        <p><strong>Auteur :</strong> ${data.author}</p>
                        <p><strong>Longueur :</strong> ${data.length} caractères</p>
                        <small>🔍 Regardez l'onglet Network pour voir les détails de la requête "random"</small>
                    </div>
                `;
            } catch (error) {
                console.error('❌ Erreur capturée:', error);
                result.innerHTML = `
                    <div class="error">
                        <h4>❌ Erreur détectée (gestion identique à script.js)</h4>
                        <p><strong>Message :</strong> ${error.message}</p>
                        <p><strong>Type :</strong> ${error.name}</p>
                        <small>🔍 Cette gestion d'erreur est exactement la même que dans script.js</small>
                    </div>
                `;
            }
        }

        // Test d'erreur cohérent avec script.js
        async function testErreurCoherent() {
            const result = document.getElementById('error-result');
            
            try {
                // Test avec une URL invalide pour simuler une erreur réseau
                console.log('🧪 Test d\'erreur volontaire...');
                const response = await fetch('https://api-inexistante-test.io/random');
                
                if (!response.ok) {
                    throw new Error(`Erreur HTTP: ${response.status}`);
                }
                
                const data = await response.json();
                result.innerHTML = '<div class="success">✅ Pas d\'erreur (surprenant !)</div>';
                
            } catch (error) {
                console.error('❌ Erreur capturée (normal pour le test):', error);
                
                // Logique IDENTIQUE à script.js
                let messageErreur = 'Une erreur inattendue s\'est produite.';
                
                if (error.message.includes('Failed to fetch')) {
                    messageErreur = 'Problème de connexion. Vérifiez votre accès internet.';
                } else if (error.message.includes('404')) {
                    messageErreur = 'Citation introuvable. Réessayons avec une autre.';
                } else if (error.message.includes('500')) {
                    messageErreur = 'Le serveur rencontre des difficultés. Veuillez patienter.';
                } else {
                    messageErreur = error.message;
                }
                
                console.log('⚠️ Erreur affichée à l\'utilisateur:', messageErreur);
                
                result.innerHTML = `
                    <div class="error">
                        <h4>💥 Erreur capturée (comportement normal)</h4>
                        <p><strong>Message utilisateur :</strong> ${messageErreur}</p>
                        <p><strong>Message technique :</strong> ${error.message}</p>
                        <small>🔍 La logique de gestion est identique à gererErreur() dans script.js</small>
                    </div>
                `;
            }
        }

        // Message d'accueil
        console.log('🔧 DEBUG GUIDE CHARGÉ - Version cohérente avec script.js');
        console.log('==========================================');
        console.log('Ce guide utilise exactement les mêmes techniques que votre script principal.');
        console.log('💡 Commandes disponibles :');
        console.log('- demoConsole() : Test des messages console');
        console.log('- demoNetworkCoherent() : Test API avec async/await');
        console.log('- testErreurCoherent() : Test gestion d\'erreurs');
    </script>
</body>
</html>